<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>2 - Input/output operations â€¢ Rvision</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><meta property="og:title" content="2 - Input/output operations">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Rvision</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/basic.html">3 - Basic operations</a>
    </li>
    <li>
      <a href="../articles/install.html">1 - Installing Rvision</a>
    </li>
    <li>
      <a href="../articles/io.html">2 - Input/output operations</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/swarm-lab/Rvision">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>2 - Input/output operations</h1>
            
      
      <small>Source: <a href="https://github.com/swarm-lab/Rvision/blob/master/vignettes/io.Rmd"><code>vignettes/io.Rmd</code></a></small>

    </div>

    
    
<div class="contents">
<p><strong>This page describes how to read and write videos and images with <a href="https://github.com/swarm-lab/Rvision"><code>Rvision</code></a>.</strong></p>
<hr>
<ul>
<li>
<a href="#reading">2.1 - Reading</a>
<ul>
<li><a href="#videos">2.1.1 - Videos</a></li>
<li><a href="#camera-streams">2.1.2 - Camera streams</a></li>
<li>
<a href="#images">2.1.3 - Images</a>
<ul>
<li><a href="#from-files">2.1.3.1 - From files</a></li>
<li><a href="#from-videos">2.1.3.2 - From videos</a></li>
<li><a href="#from-camera-streams">2.1.3.3 - From streams</a></li>
</ul>
</li>
</ul>
</li>
<li>
<a href="#writing">2.2 - Writing</a>
<ul>
<li><a href="#videos-1">2.2.1 - Videos</a></li>
<li><a href="#images-1">2.2.2 - Images</a></li>
</ul>
</li>
</ul>
<hr>
<div id="reading" class="section level2">
<h2 class="hasAnchor">
<a href="#reading" class="anchor"></a>2.1 - Reading</h2>
<div id="videos" class="section level3">
<h3 class="hasAnchor">
<a href="#videos" class="anchor"></a>2.1.1 - Videos</h3>
<p>You can create a <code>Video</code> object from a video file as follows:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">path_to_video &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">"sample_vid"</span>, <span class="st">"Balloon.mp4"</span>, <span class="dt">package =</span> <span class="st">"Rvision"</span>)
my_video &lt;-<span class="st"> </span><span class="kw"><a href="../reference/video.html">video</a></span>(<span class="dt">filename =</span> path_to_video)</code></pre></div>
<p><code>Video</code> objects can be released from memory as follows:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/release.html">release</a></span>(my_video)</code></pre></div>
<pre><code>## Video released successfully.</code></pre>
<p>Note that <code>Video</code> objects are wrappers around <a href="http://opencv.org/"><code>OpenCV</code></a> <a href="https://docs.opencv.org/3.4.1/d8/dfe/classcv_1_1VideoCapture.html"><code>VideoCapture</code></a> objects. They will not persist between <a href="https://cran.r-project.org"><code>R</code></a> sessions.</p>
</div>
<div id="camera-streams" class="section level3">
<h3 class="hasAnchor">
<a href="#camera-streams" class="anchor"></a>2.1.2 - Camera streams</h3>
<p>You can create a <code>Stream</code> object from a camera stream as follows:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_stream &lt;-<span class="st"> </span><span class="kw"><a href="../reference/stream.html">stream</a></span>(<span class="dt">index =</span> <span class="dv">0</span>)</code></pre></div>
<p>The index argument takes an integer number corresponding to the position of the camera in the list of video capturing devices available on your computer. 0 corresponds to the default camera, which is usually the embedded webcam on most computers. Note that the order of the list of video capturing devices might change after each computer restart.</p>
<p><code>Stream</code> objects can be released from memory as follows:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/release.html">release</a></span>(my_stream)</code></pre></div>
<pre><code>## Stream released successfully.</code></pre>
<p>Note that <code>Stream</code> objects are wrappers around <a href="http://opencv.org/"><code>OpenCV</code></a> <a href="https://docs.opencv.org/3.4.1/d8/dfe/classcv_1_1VideoCapture.html"><code>VideoCapture</code></a> objects. They will not persist between <a href="https://cran.r-project.org"><code>R</code></a> sessions.</p>
</div>
<div id="images" class="section level3">
<h3 class="hasAnchor">
<a href="#images" class="anchor"></a>2.1.3 - Images</h3>
<p>There are three ways to create <code>Image</code> objects: from files, from <code>Video</code> objects, and from <code>Stream</code> objects.</p>
<p>Note that <code>Image</code> objects are wrappers around <a href="http://opencv.org/"><code>OpenCV</code></a> <a href="https://docs.opencv.org/3.4.1/d3/d63/classcv_1_1Mat.html"><code>Mat</code></a> objects. They will not persist between <a href="https://cran.r-project.org"><code>R</code></a> sessions.</p>
<div id="from-files" class="section level4">
<h4 class="hasAnchor">
<a href="#from-files" class="anchor"></a>2.1.3.1 - From files</h4>
<p>You can create an <code>Image</code> object from an image file as follows:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">path_to_image &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">"sample_img"</span>, <span class="st">"bunny.png"</span>, <span class="dt">package =</span> <span class="st">"Rvision"</span>)
my_image &lt;-<span class="st"> </span><span class="kw"><a href="../reference/image.html">image</a></span>(<span class="dt">filename =</span> path_to_image)</code></pre></div>
</div>
<div id="from-videos" class="section level4">
<h4 class="hasAnchor">
<a href="#from-videos" class="anchor"></a>2.1.3.2 - From videos</h4>
<p>You can create an <code>Image</code> object from the next available frame of a <code>Video</code> object as follows:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_image &lt;-<span class="st"> </span><span class="kw"><a href="../reference/readNext.html">readNext</a></span>(my_video)</code></pre></div>
<p>You can create an <code>Image</code> object from any arbitrary frame of a <code>Video</code> object as follows (here frame number 100):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_image &lt;-<span class="st"> </span><span class="kw"><a href="../reference/readFrame.html">readFrame</a></span>(my_video, <span class="dv">100</span>)</code></pre></div>
</div>
<div id="from-camera-streams" class="section level4">
<h4 class="hasAnchor">
<a href="#from-camera-streams" class="anchor"></a>2.1.3.3 - From camera streams</h4>
<p>You can create an <code>Image</code> object from the next available frame of a <code>Stream</code> object as follows:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_image &lt;-<span class="st"> </span><span class="kw"><a href="../reference/readNext.html">readNext</a></span>(my_stream)</code></pre></div>
<hr>
</div>
</div>
</div>
<div id="writing" class="section level2">
<h2 class="hasAnchor">
<a href="#writing" class="anchor"></a>2.2 - Writing</h2>
<div id="videos-1" class="section level3">
<h3 class="hasAnchor">
<a href="#videos-1" class="anchor"></a>2.2.1 - Videos</h3>
<p>Videos can be written to the disk using a <code>VideoWriter</code> object.</p>
<p>When creating a <code>VideoWriter</code> object, you need to specify the codec of the video, its framerate, its height and its width. For instance, we will here create a <code>VideoWriter</code> object that will save to a temporary <a href="https://en.wikipedia.org/wiki/MPEG-4_Part_14"><code>mp4</code></a> video file using the <a href="https://www.videolan.org/developers/x264.html"><code>x264</code></a> codec at 30fps.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">path_to_video &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="kw">tempfile</span>(), <span class="st">".mp4"</span>)
my_writer &lt;-<span class="st"> </span><span class="kw"><a href="../reference/videoWriter.html">videoWriter</a></span>(path_to_video, <span class="dt">fourcc =</span> <span class="st">"x264"</span>, <span class="dt">fps =</span> <span class="dv">30</span>, <span class="dt">height =</span> <span class="dv">720</span>, <span class="dt">width =</span> <span class="dv">1280</span>)</code></pre></div>
<p>Once a <code>VideoWriter</code> object has been created, you can write individual frames to it. For instance, we will here capture 30 frames from the default webcam and write them to the video file.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_len</span>(<span class="dv">30</span>)) {
  <span class="kw"><a href="../reference/writeFrame.html">writeFrame</a></span>(my_writer, <span class="kw"><a href="../reference/readNext.html">readNext</a></span>(my_stream))
}</code></pre></div>
<p><code>VideoWriter</code> objects can be released from memory as follows:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/release.html">release</a></span>(my_writer)</code></pre></div>
<pre><code>## VideoWriter released successfully.</code></pre>
<p>Note that <code>VideoWriter</code> objects are wrappers around <a href="http://opencv.org/"><code>OpenCV</code></a> <a href="https://docs.opencv.org/3.4.1/dd/d9e/classcv_1_1VideoWriter.html"><code>VideoWriter</code></a> objects. They will not persist between <a href="https://cran.r-project.org"><code>R</code></a> sessions.</p>
</div>
<div id="images-1" class="section level3">
<h3 class="hasAnchor">
<a href="#images-1" class="anchor"></a>2.2.2 - Images</h3>
<p>Writing an image to a file is straightforward using the <code>write.Image</code> function.</p>
<p><a href="https://github.com/swarm-lab/Rvision"><code>Rvision</code></a> will guess the format of the image file from the file extension. For instance, we will here capture 1 frame from the default webcam and write it to a temporary png image file.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">path_to_image &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="kw">tempfile</span>(), <span class="st">".png"</span>)
<span class="kw"><a href="../reference/write.Image.html">write.Image</a></span>(<span class="kw"><a href="../reference/readNext.html">readNext</a></span>(my_stream), path_to_image)</code></pre></div>
<pre><code>## Image saved successfully.</code></pre>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#reading">2.1 - Reading</a></li>
      <li><a href="#writing">2.2 - Writing</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="http://www.theswarmlab.com">Simon Garnier</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
